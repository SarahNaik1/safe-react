{"version":3,"sources":["routes/safe/components/SafeLoadError.tsx","routes/safe/container/index.tsx"],"names":["ErrorContainer","styled","div","SafeLoadError","dispatch","useDispatch","history","useHistory","useEffect","removeViewedSafe","extractSafeAddress","src","alt","size","Button","onClick","push","WELCOME_ROUTE","color","variant","BALANCES_TAB_BTN_TEST_ID","SETTINGS_TAB_BTN_TEST_ID","APPS_TAB_BTN_TEST_ID","TRANSACTIONS_TAB_BTN_TEST_ID","ADDRESS_BOOK_TAB_BTN_TEST_ID","SAFE_VIEW_NAME_HEADING_TEST_ID","TRANSACTIONS_TAB_NEW_BTN_TEST_ID","Apps","lazy","Settings","Balances","TxList","AddressBookTable","Container","featuresEnabled","useSelector","currentSafeFeaturesEnabled","isSafeLoaded","currentSafeOwners","length","useState","hasLoadFailed","setHasLoadFailed","failedTimeout","setTimeout","SAFE_POLLING_INTERVAL","clearTimeout","isOpen","title","body","footer","onClose","modal","setModal","exact","path","SAFE_ROUTES","ASSETS_BALANCES","ASSETS_BALANCES_COLLECTIBLES","render","wrapInSuspense","TRANSACTIONS","TRANSACTIONS_HISTORY","TRANSACTIONS_QUEUE","TRANSACTIONS_SINGULAR","ADDRESS_BOOK","APPS","includes","FEATURES","SAFE_APPS","generateSafeRoute","extractPrefixedSafeAddress","SETTINGS","to"],"mappings":"2qBAoCaA,EAAiBC,UAAOC,IAAV,+OAWZC,EArCO,WACpB,IAAMC,EAAWC,cACXC,EAAUC,cAEhBC,qBAAU,WAER,OAAO,WACLJ,EAASK,YAAiBC,mBAE3B,CAACN,IAMJ,OACE,eAACJ,EAAD,WACE,qBAAKW,IAAI,wBAAwBC,IAAI,UACrC,cAAC,QAAD,CAAOC,KAAK,KAAZ,0CACA,cAACC,EAAA,EAAD,CAAQC,QARQ,WAClBT,EAAQU,KAAKC,MAOmBC,MAAM,UAAUL,KAAK,SAASM,QAAQ,YAApE,mCChBOC,EAA2B,mBAC3BC,EAA2B,mBAC3BC,EAAuB,eACvBC,EAA+B,uBAC/BC,EAA+B,uBAC/BC,EAAiC,oBACjCC,EAAmC,2BAE1CC,EAAOC,gBAAK,kBAAM,wEAClBC,EAAWD,gBAAK,kBAAM,mCACtBE,EAAWF,gBAAK,kBAAM,oCACtBG,EAASH,gBAAK,kBAAM,wEACpBI,EAAmBJ,gBAAK,kBAAM,wEA2FrBK,UAzFG,WAChB,IAAMC,EAAkBC,YAAYC,KAE9BC,EADSF,YAAYG,KACCC,OAAS,EACrC,EAA0CC,oBAAkB,GAA5D,mBAAOC,EAAP,KAAsBC,EAAtB,KAEAlC,qBAAU,WACR,IAAI6B,EAAJ,CAIA,IAAMM,EAAgBC,YAAW,WAC/BF,GAAiB,KAChBG,KACH,OAAO,WACLC,aAAaH,OAEd,CAACN,IAEJ,MAA0BG,mBAAS,CACjCO,QAAQ,EACRC,MAAO,KACPC,KAAM,KACNC,OAAQ,KACRC,QAAS,eALX,mBAAOC,EAAP,KAAcC,EAAd,KAQA,GAAIZ,EACF,OAAO,cAAC,EAAD,IAGT,IAAKJ,EACH,OACE,cAAC,IAAD,UACE,cAAC,SAAD,CAAQxB,KAAK,SAmBnB,OACE,qCACE,eAAC,IAAD,WACE,cAAC,IAAD,CACEyC,OAAK,EACLC,KAAM,CAACC,IAAYC,gBAAiBD,IAAYE,8BAChDC,OAAQ,kBAAMC,YAAe,cAAC9B,EAAD,IAAc,SAE7C,cAAC,IAAD,CACEwB,OAAK,EACLC,KAAM,CACJC,IAAYK,aACZL,IAAYM,qBACZN,IAAYO,mBACZP,IAAYQ,uBAEdL,OAAQ,kBAAMC,YAAe,cAAC7B,EAAD,IAAY,SAE3C,cAAC,IAAD,CAAOuB,OAAK,EAACC,KAAMC,IAAYS,aAAcN,OAAQ,kBAAMC,YAAe,cAAC5B,EAAD,IAAsB,SAChG,cAAC,IAAD,CACEsB,OAAK,EACLC,KAAMC,IAAYU,KAClBP,OAAQ,YAAkB,IAAfrD,EAAc,EAAdA,QAIT,OAHK4B,EAAgBiC,SAASC,WAASC,YACrC/D,EAAQU,KAAKsD,YAAkBd,IAAYC,gBAAiBc,gBAEvDX,YAAe,cAACjC,EAAD,IAAU,SAGpC,cAAC,IAAD,CAAO4B,KAAMC,IAAYgB,SAAUb,OAAQ,kBAAMC,YAAe,cAAC/B,EAAD,IAAc,SAC9E,cAAC,IAAD,CAAU4C,GAAIjB,IAAYC,qBAE3BL,EAAML,QAAU,cAAC,eAAD,2BAAkBK,GAAlB,IAAyBD,QA9CpB,WACJ,IAAD,EAAfC,EAAMD,UACR,UAAAC,EAAMD,eAAN,cAAAC,IAGFC,EAAS,CACPN,QAAQ,EACRC,MAAO,KACPC,KAAM,KACNC,OAAQ,KACRC,QAAS","file":"static/js/102.5e71a8d3.chunk.js","sourcesContent":["import { ReactElement, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { Title } from '@gnosis.pm/safe-react-components'\nimport styled from 'styled-components'\n\nimport Button from 'src/components/layout/Button'\nimport { extractSafeAddress, WELCOME_ROUTE } from 'src/routes/routes'\nimport { useDispatch } from 'react-redux'\nimport removeViewedSafe from 'src/logic/currentSession/store/actions/removeViewedSafe'\n\nconst SafeLoadError = (): ReactElement => {\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  useEffect(() => {\n    // Remove the errorneous Safe from the list of viewed safes on unmount\n    return () => {\n      dispatch(removeViewedSafe(extractSafeAddress()))\n    }\n  }, [dispatch])\n\n  const handleClick = () => {\n    history.push(WELCOME_ROUTE)\n  }\n\n  return (\n    <ErrorContainer>\n      <img src=\"./resources/error.png\" alt=\"Error\" />\n      <Title size=\"xs\">This Safe couldn&apos;t be loaded</Title>\n      <Button onClick={handleClick} color=\"primary\" size=\"medium\" variant=\"contained\">\n        Back to Main Page\n      </Button>\n    </ErrorContainer>\n  )\n}\n\nexport const ErrorContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  // Offset so that it is centered relative to the header\n  margin-top: -30px;\n`\n\nexport default SafeLoadError\n","import { GenericModal, Loader } from '@gnosis.pm/safe-react-components'\nimport { useState, lazy, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Redirect, Route, Switch } from 'react-router-dom'\n\nimport { currentSafeFeaturesEnabled, currentSafeOwners } from 'src/logic/safe/store/selectors'\nimport { wrapInSuspense } from 'src/utils/wrapInSuspense'\nimport { LoadingContainer } from 'src/components/LoaderContainer'\nimport { generateSafeRoute, extractPrefixedSafeAddress, SAFE_ROUTES } from 'src/routes/routes'\nimport { FEATURES } from '@gnosis.pm/safe-react-gateway-sdk'\nimport { SAFE_POLLING_INTERVAL } from 'src/utils/constants'\nimport SafeLoadError from '../components/SafeLoadError'\n\nexport const BALANCES_TAB_BTN_TEST_ID = 'balances-tab-btn'\nexport const SETTINGS_TAB_BTN_TEST_ID = 'settings-tab-btn'\nexport const APPS_TAB_BTN_TEST_ID = 'apps-tab-btn'\nexport const TRANSACTIONS_TAB_BTN_TEST_ID = 'transactions-tab-btn'\nexport const ADDRESS_BOOK_TAB_BTN_TEST_ID = 'address-book-tab-btn'\nexport const SAFE_VIEW_NAME_HEADING_TEST_ID = 'safe-name-heading'\nexport const TRANSACTIONS_TAB_NEW_BTN_TEST_ID = 'transactions-tab-new-btn'\n\nconst Apps = lazy(() => import('src/routes/safe/components/Apps'))\nconst Settings = lazy(() => import('src/routes/safe/components/Settings'))\nconst Balances = lazy(() => import('src/routes/safe/components/Balances'))\nconst TxList = lazy(() => import('src/routes/safe/components/Transactions/TxList'))\nconst AddressBookTable = lazy(() => import('src/routes/safe/components/AddressBook'))\n\nconst Container = (): React.ReactElement => {\n  const featuresEnabled = useSelector(currentSafeFeaturesEnabled)\n  const owners = useSelector(currentSafeOwners)\n  const isSafeLoaded = owners.length > 0\n  const [hasLoadFailed, setHasLoadFailed] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (isSafeLoaded) {\n      return\n    }\n\n    const failedTimeout = setTimeout(() => {\n      setHasLoadFailed(true)\n    }, SAFE_POLLING_INTERVAL)\n    return () => {\n      clearTimeout(failedTimeout)\n    }\n  }, [isSafeLoaded])\n\n  const [modal, setModal] = useState({\n    isOpen: false,\n    title: null,\n    body: null,\n    footer: null,\n    onClose: () => {},\n  })\n\n  if (hasLoadFailed) {\n    return <SafeLoadError />\n  }\n\n  if (!isSafeLoaded) {\n    return (\n      <LoadingContainer>\n        <Loader size=\"md\" />\n      </LoadingContainer>\n    )\n  }\n\n  const closeGenericModal = () => {\n    if (modal.onClose) {\n      modal.onClose?.()\n    }\n\n    setModal({\n      isOpen: false,\n      title: null,\n      body: null,\n      footer: null,\n      onClose: () => {},\n    })\n  }\n\n  return (\n    <>\n      <Switch>\n        <Route\n          exact\n          path={[SAFE_ROUTES.ASSETS_BALANCES, SAFE_ROUTES.ASSETS_BALANCES_COLLECTIBLES]}\n          render={() => wrapInSuspense(<Balances />, null)}\n        />\n        <Route\n          exact\n          path={[\n            SAFE_ROUTES.TRANSACTIONS,\n            SAFE_ROUTES.TRANSACTIONS_HISTORY,\n            SAFE_ROUTES.TRANSACTIONS_QUEUE,\n            SAFE_ROUTES.TRANSACTIONS_SINGULAR,\n          ]}\n          render={() => wrapInSuspense(<TxList />, null)}\n        />\n        <Route exact path={SAFE_ROUTES.ADDRESS_BOOK} render={() => wrapInSuspense(<AddressBookTable />, null)} />\n        <Route\n          exact\n          path={SAFE_ROUTES.APPS}\n          render={({ history }) => {\n            if (!featuresEnabled.includes(FEATURES.SAFE_APPS)) {\n              history.push(generateSafeRoute(SAFE_ROUTES.ASSETS_BALANCES, extractPrefixedSafeAddress()))\n            }\n            return wrapInSuspense(<Apps />, null)\n          }}\n        />\n        <Route path={SAFE_ROUTES.SETTINGS} render={() => wrapInSuspense(<Settings />, null)} />\n        <Redirect to={SAFE_ROUTES.ASSETS_BALANCES} />\n      </Switch>\n      {modal.isOpen && <GenericModal {...modal} onClose={closeGenericModal} />}\n    </>\n  )\n}\nexport default Container\n"],"sourceRoot":""}