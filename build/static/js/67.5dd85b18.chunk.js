(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[67],{1570:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a,r=n(43),c=n(26),i=n(0),o=n(24),s=n(1589),u=n(1607),d=n(21),l=n(1608),j=n(1611),b=n(1612),p=n(22),f=n(341),O=n(12),x=n(1602),h=n(1579),m=n(1595),g=n(2),v=o.default.div(a||(a=Object(c.a)(["\n  padding: 0 "," ",";\n"])),O.lg,O.md),w=function(e){var t=e.children,n=e.operation,a=e.txData,c=e.txValue,o=void 0===c?"0":c,O=e.txTo,w=e.txType,S=e.onSubmit,y=e.onBack,C=e.submitText,A=e.isConfirmDisabled,T=Object(i.useState)("0"),k=Object(r.a)(T,2),E=k[0],I=k[1],D=Object(i.useState)(),M=Object(r.a)(D,2),R=M[0],z=M[1],L=Object(i.useState)(),N=Object(r.a)(L,2),U=N[0],P=N[1],B=Object(i.useState)(),F=Object(r.a)(B,2),_=F[0],G=F[1],q=Object(i.useState)(),H=Object(r.a)(q,2),V=H[0],W=H[1],K=Object(i.useState)(!0),J=Object(r.a)(K,2),Y=J[0],X=J[1],Z=Object(d.l)(),$=Object(h.e)(w),Q=Object(s.b)({txData:a,txRecipient:O||Z,txType:w,txAmount:o,safeTxGas:E,manualGasPrice:R,manualMaxPrioFee:U,manualGasLimit:_,manualSafeNonce:V,operation:n}),ee=Q.gasCostFormatted,te=Q.gasPriceFormatted,ne=Q.gasMaxPrioFeeFormatted,ae=Q.gasLimit,re=Q.gasEstimation,ce=Q.txEstimationExecutionStatus,ie=Q.isCreation,oe=Q.isOffChainSignature,se=Object(b.a)(ce),ue=Object(r.a)(se,2),de=ue[0],le=ue[1],je=Object(m.a)(void 0,V),be=Y&&je,pe=function(e){var t=te,n=e.ethGasPrice,a=ae,r=e.ethGasLimit,c=ne,i=e.ethMaxPrioFee,o=re,s=e.safeTxGas,u=e.safeNonce;if(t!==n&&z(n),c!==i&&P(i),a!==r&&G(r),s&&o!==s&&I(s),u){var d=parseInt(u,10);W(d)}};return Object(g.jsx)(u.a,{isOffChainSignature:oe,isExecution:be,ethGasLimit:ae,ethGasPrice:te,ethMaxPrioFee:ne,safeTxGas:re,closeEditModalCallback:pe,children:function(e,n){return Object(g.jsxs)(g.Fragment,{children:[t,Object(g.jsxs)(v,{children:[!$&&je&&Object(g.jsx)(j.a,{onChange:X}),!$&&Object(g.jsx)(x.a,{txParameters:e,onEdit:n,isTransactionCreation:ie,isTransactionExecution:be,isOffChainSignature:oe})]}),!$&&Object(g.jsx)(l.a,{gasCostFormatted:ee,isCreation:ie,isExecution:be,safeNonce:e.safeNonce,txEstimationExecutionStatus:ce}),Object(g.jsx)(f.b.Footer,{withoutBorder:!$&&de!==f.a.LOADING,children:Object(g.jsx)(f.b.Footer.Buttons,{cancelButtonProps:{onClick:y||pe,text:"Back"},confirmButtonProps:{onClick:function(){return function(e){if(le(f.a.LOADING),!Z)return le(f.a.READY),void Object(p.c)(p.b._802);S(e,!be)}(e)},status:de,disabled:A,text:ce===s.a.LOADING?"Estimating":C,testId:"submit-tx-btn"}})})]})}})}},1588:function(e,t,n){"use strict";var a,r,c=n(26),i=n(24),o=n(27),s=n(2),u=i.default.div(a||(a=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),d=Object(i.default)(o.Divider)(r||(r=Object(c.a)(["\n  width: 100%;\n"])));t.a=function(e){var t=e.withArrow;return Object(s.jsxs)(u,{children:[t&&Object(s.jsx)(o.Icon,{type:"arrowDown",size:"md"}),Object(s.jsx)(d,{})]})}},1866:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(43),r=n(1867),c=n.n(r),i=n(0),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Object(i.useRef)(e),o=Object(i.useState)(e),s=Object(a.a)(o,2),u=s[0],d=s[1],l=Object(i.useMemo)((function(){return c()((function(e){return d(e)}),t,n)}),[d,t,n]);return Object(i.useEffect)((function(){if(e!==r.current)return l(e),r.current=e,l.cancel}),[l,e,r]),u}},2971:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s,u,d,l,j,b,p,f,O,x,h,m,g,v=n(58),w=n(0),S=n(9),y=n(1),C=n.n(y),A=n(15),T=n(43),k=n(26),E=n(24),I=n(27),D=n(2090),M=n(38),R=n(2095),z=n(432),L=n.n(z),N=n(79),U=n(19),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(a){return!1}},B=n(190),F=n(355),_=n(25),G=n(341),q=n(565),H=n(2),V=E.default.div(a||(a=Object(k.a)(["\n  padding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.sm," ").concat(t.margin.lg)})),W=E.default.div(r||(r=Object(k.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]))),K=E.default.div(c||(c=Object(k.a)(["\n  margin-top: 15px;\n"]))),J=function(e){var t=e.onTxReject,n=e.onClose,a=e.requestId;return Object(H.jsxs)(V,{children:[Object(H.jsxs)(W,{children:[Object(H.jsx)(I.Icon,{color:"error",size:"md",type:"info"}),Object(H.jsx)(I.Title,{size:"xs",children:"Transaction error"})]}),Object(H.jsx)(I.Text,{size:"lg",children:"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information."}),Object(H.jsx)(K,{children:Object(H.jsx)(I.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:function(){return t(a),void n()},handleOk:function(){},okDisabled:!0,okText:"Submit"})})]})},Y=n(35),X=n(82),Z=n(567),$=n(102),Q=n(64),ee=n(600),te=n(566),ne=n(12),ae=n(273),re=n.n(ae),ce=n(158),ie=n(1579),oe=E.default.div(i||(i=Object(k.a)(["\n  display: flex;\n  align-items: center;\n\n  > :nth-child(2) {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.margin})),se=E.default.div(o||(o=Object(k.a)(["\n  margin-bottom: 15px;\n\n  > :nth-child(2) {\n    margin-bottom: 15px;\n  }\n"]))),ue=E.default.div(s||(s=Object(k.a)(["\n  width: 100%;\n  max-height: 260px;\n  overflow-y: auto;\n  border-top: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),de=E.default.div(u||(u=Object(k.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  padding: 0 24px;\n  height: 50px;\n  border-bottom: 2px solid ",";\n\n  :hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.theme.colors.separator})),le=E.default.div(d||(d=Object(k.a)(["\n  margin-bottom: 15px;\n"]))),je=function(e){try{return Array.isArray(e)||(e=e.split(",")),e.reduce((function(e,t){return e+Object(X.hexToBytes)(t).length}),0)}catch(t){return 0}},be=function(e){var t=e.txRecipient,n=e.txData,a=e.txValue,r=e.recipientName;return Object(H.jsxs)(se,{children:[Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(I.Text,{size:"lg",strong:!0,children:Object(ie.d)(a)}),Object(H.jsx)(ce.a,{hash:t,showAvatar:!0,textSize:"lg",showCopyBtn:!0,name:r,explorerUrl:Object(U.i)(t)})]}),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(I.Text,{size:"lg",strong:!0,children:"Data (hex encoded):"}),Object(H.jsxs)(oe,{margin:5,children:[Object(H.jsxs)(I.Text,{size:"lg",children:[n?je(n):0," bytes"]}),Object(H.jsx)(I.CopyToClipboardBtn,{textToCopy:n})]})]})]})},pe=function(e,t){var n;if("address"===e.type&&(n=Object(H.jsx)(ce.a,{hash:e.value,showAvatar:!0,textSize:"lg",showCopyBtn:!0,explorerUrl:Object(U.i)(e.value)})),e.type.startsWith("bytes")&&(n=Object(H.jsxs)(oe,{margin:5,children:[Object(H.jsxs)(I.Text,{size:"lg",children:[je(e.value)," bytes"]}),Object(H.jsx)(I.CopyToClipboardBtn,{textToCopy:e.value})]})),!n){var a=e.value;if(e.type.endsWith("[]"))try{a=JSON.stringify(e.value)}catch(r){}n=Object(H.jsx)(I.Text,{size:"lg",children:a})}return Object(H.jsxs)(le,{children:[Object(H.jsxs)(I.Text,{size:"lg",strong:!0,children:[e.name," (",e.type,")"]}),n]},t)},fe=function(e){var t=e.decodedData,n=e.onTxItemClick;return t?Object(H.jsx)(ue,{children:Object(H.jsxs)(de,{onClick:function(){return n(t)},children:[Object(H.jsx)(I.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(H.jsxs)(oe,{margin:20,children:[Object(H.jsx)(I.Text,{size:"xl",children:t.method}),Object(H.jsx)(I.FixedIcon,{type:"chevronRight"})]})]})}):null},Oe=function(e){var t=e.decodedData,n=e.onTxItemClick,a=re()(t,"parameters[0].valueDecoded");return a?Object(H.jsx)(ue,{children:a.map((function(e,t){return Object(H.jsxs)(de,{onClick:function(){return n(e)},children:[Object(H.jsx)(I.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(H.jsxs)(oe,{margin:20,children:[e.dataDecoded&&Object(H.jsx)(I.Text,{size:"xl",children:e.dataDecoded.method}),Object(H.jsx)(I.FixedIcon,{type:"chevronRight"})]})]},t)}))}):null},xe=function(e){var t=e.txs,n=e.decodedData,a=e.onTxItemClick;return t.length>1?Object(H.jsx)(Oe,{decodedData:n,onTxItemClick:a}):Object(H.jsx)(fe,{decodedData:n,onTxItemClick:a})},he=function(){var e=Object(A.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.length)&&"0x"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,Object(Y.getDecodedData)(_.e,Object(U.b)(),t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),me=n(296),ge=n(150),ve=n(173),we=n(1588),Se=n(242),ye=n(1570),Ce=E.default.div(l||(l=Object(k.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),ne.md,ne.lg),Ae=E.default.div(j||(j=Object(k.a)(["\n  margin: 24px -24px;\n"]))),Te=Object(E.default)(ge.a)(b||(b=Object(k.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),ke=function(e){var t=e.app,n=e.txs,a=e.safeAddress,r=e.ethBalance,c=e.safeName,i=e.hidden,o=e.onUserConfirm,s=e.onClose,u=e.onReject,d=e.requestId,l=e.showDecodedTxData,j=n.length>1,b=Object(w.useState)(null),p=Object(T.a)(b,2),f=p[0],O=p[1],x=Object(M.d)(),h=Object(U.n)(),m=Object(U.i)(a),g=Object(M.e)(Se.b),v=Object(w.useMemo)((function(){var e;return j?Object($.g)():null===(e=n[0])||void 0===e?void 0:e.to}),[n,j]),S=Object(w.useMemo)((function(){var e;return j?Object(ee.a)(n):null===(e=n[0])||void 0===e?void 0:e.data}),[n,j]),y=Object(w.useMemo)((function(){var e,t;return j?"0":(t=null===(e=n[0])||void 0===e?void 0:e.value,Object(X.toBN)(t).toString())}),[n,j]),k=Object(w.useMemo)((function(){return j?Y.Operation.DELEGATE:Y.Operation.CALL}),[j]);Object(w.useEffect)((function(){var e=function(){var e=Object(A.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(S);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[S]);var E=function(e){o(e,d),s()};return Object(H.jsx)(ye.a,{txData:S,txValue:y,operation:k,onSubmit:function(e,n){x(Object(Z.c)({safeAddress:a,to:v,valueInWei:y,txData:S,operation:k,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:Q.a.STANDARD_TX,delayExecution:n},E,u))},isConfirmDisabled:!g,onBack:u,children:Object(H.jsxs)("div",{hidden:i,children:[Object(H.jsx)(te.a,{title:t.name,iconUrl:t.iconUrl,onClose:u}),Object(H.jsx)(ve.a,{}),Object(H.jsxs)(Ce,{children:[Object(H.jsx)(ce.a,{name:c,hash:a,showAvatar:!0,showCopyBtn:!0,explorerUrl:m}),Object(H.jsxs)(Te,{children:[Object(H.jsx)(I.Text,{size:"md",children:"Balance:"}),Object(H.jsx)(I.Text,{size:"md",strong:!0,children:"".concat(r," ").concat(h.symbol)})]}),Object(H.jsx)(we.a,{withArrow:!0}),Object(H.jsx)(be,{txRecipient:v,txData:S,txValue:Object(me.a)(y,h.decimals)}),Object(H.jsx)(Ae,{children:Object(H.jsx)(xe,{txs:n,decodedData:f,onTxItemClick:l})}),!j&&Object(H.jsx)(we.a,{})]})]})})},Ee=n(426),Ie=n(344),De=n.n(Ie),Me=n(86),Re=n(110),ze=Object(E.default)(Me.a)(p||(p=Object(k.a)(["\n  && {\n    font-size: ",";\n    white-space: nowrap;\n    max-width: 370px;\n    overflow: hidden;\n  }\n"])),ne.lg),Le=E.default.img(f||(f=Object(k.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]))),Ne=E.default.div(O||(O=Object(k.a)(["\n  display: flex;\n  align-items: center;\n"]))),Ue=Object(E.default)(Re.a)(x||(x=Object(k.a)(["\n  padding: "," ",";\n  justify-content: space-between;\n  box-sizing: border-box;\n  max-height: 75px;\n"])),ne.md,ne.lg),Pe=Object(E.default)(De.a)(h||(h=Object(k.a)(["\n  height: 35px;\n  width: 35px;\n"]))),Be=E.default.div(m||(m=Object(k.a)(["\n  margin-right: 15px;\n"]))),Fe=function(e){var t=e.goBack,n=e.iconUrl,a=e.title,r=e.onClose;return Object(H.jsxs)(Ue,{align:"center",grow:!0,children:[Object(H.jsxs)(Ne,{children:[t&&Object(H.jsx)(Be,{children:Object(H.jsx)(Ee.a,{onClick:t,children:Object(H.jsx)(I.Icon,{type:"arrowLeft",size:"md"})})}),n&&Object(H.jsx)(Le,{alt:a,src:n}),Object(H.jsx)(ze,{noMargin:!0,weight:"bolder",title:a,children:a})]}),Object(H.jsx)(Ee.a,{disableRipple:!0,onClick:r,children:Object(H.jsx)(Pe,{})})]})},_e=E.default.div(g||(g=Object(k.a)(["\n  max-width: 480px;\n  padding: "," ",";\n  word-break: break-word;\n"])),ne.md,ne.lg);var Ge,qe,He,Ve,We,Ke,Je,Ye,Xe,Ze,$e,Qe,et,tt,nt,at,rt,ct,it,ot,st,ut,dt,lt,jt,bt,pt,ft,Ot,xt,ht,mt,gt,vt,wt,St,yt,Ct,At=function(e){var t,n,a=e.hideDecodedTxData,r=e.onClose,c=e.decodedTxData,i=Object(U.n)();if(void 0!==c.operation){var o,s=Object(me.a)(c.value,i.decimals);n=Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(be,{txRecipient:c.to,txData:c.data,txValue:s}),null===(o=c.dataDecoded)||void 0===o?void 0:o.parameters.map((function(e,t){return pe(e,t)}))]})}else n=Object(H.jsx)(H.Fragment,{children:c.parameters.map((function(e,t){return pe(e,t)}))});return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Fe,{title:(null===(t=c.dataDecoded)||void 0===t?void 0:t.method)||c.method,onClose:r,goBack:a}),Object(H.jsx)(ve.a,{}),Object(H.jsx)(_e,{children:n})]})},Tt=function(e){var t=Object(w.useState)(),n=Object(T.a)(t,2),a=n[0],r=n[1],c=!e.txs.length||e.txs.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&void 0===Object(q.k)(e.to)&&!!e.data&&"string"===typeof e.data}(e)})),i=r,o=function(){return r(void 0)},s=function(){e.onClose(),e.onTxReject(e.requestId)};return c?Object(H.jsx)(G.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:Object(H.jsx)(J,Object(S.a)({},e))}):Object(H.jsxs)(G.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:[a&&Object(H.jsx)(At,{onClose:function(){o(),s()},hideDecodedTxData:o,decodedTxData:a}),Object(H.jsx)(ke,Object(S.a)(Object(S.a)({},e),{},{onReject:s,showDecodedTxData:i,hidden:!!a}))]})},kt=n(401),Et=n(578),It=n(7),Dt=n(22),Mt=function e(t,n){var a=this;Object(It.a)(this,e),this.iframeRef=void 0,this.handlers=new Map,this.app=void 0,this.on=function(e,t){a.handlers.set(e,t)},this.isValidMessage=function(e){var t=e.source.parent===window.parent,n=Object.values(D.Methods).includes(e.data.method);return t&&n},this.canHandleMessage=function(e){return Boolean(a.handlers.get(e.data.method))},this.send=function(e,t){var n,r,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(D.getSDKVersion)(),o=c?D.MessageFormatter.makeErrorResponse(t,e,i):D.MessageFormatter.makeResponse(t,e,i);null===(n=a.iframeRef.current)||void 0===n||null===(r=n.contentWindow)||void 0===r||r.postMessage(o,"*")},this.handleIncomingMessage=function(){var e=Object(A.a)(C.a.mark((function e(t){var n,r,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.isValidMessage(t),r=a.canHandleMessage(t),!n||!r){e.next=15;break}return c=a.handlers.get(t.data.method),e.prev=4,e.next=7,c(t);case 7:"undefined"!==typeof(i=e.sent)&&a.send(i,t.data.id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),a.send(e.t0.message,t.data.id,!0),Object(Dt.d)(Dt.b._901,e.t0.message,{contexts:{safeApp:a.app,request:t.data}});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(){window.removeEventListener("message",a.handleIncomingMessage)},this.iframeRef=t,this.app=n,window.addEventListener("message",this.handleIncomingMessage)},Rt=n(773),zt=n(602),Lt=n(342),Nt={isOpen:!1,message:"",requestId:""},Ut=n(63),Pt=n(31),Bt=n(46),Ft=n(616),_t=E.default.div(Ge||(Ge=Object(k.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),ne.md,ne.lg),Gt=Object(E.default)(ge.a)(qe||(qe=Object(k.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),qt=Object(E.default)(Ft.a)(He||(He=Object(k.a)(["\n  &.MuiFormControl-root {\n    padding-bottom: ",";\n  }\n"])),(function(e){return e.theme.margin.md})),Ht=Object(E.default)(Me.a)(Ve||(Ve=Object(k.a)(["\n  display: flex;\n  align-items: center;\n\n  > span:first-child {\n    margin-right: ",";\n  }\n"])),(function(e){return e.theme.margin.xs})),Vt=function(e){var t=e.app,n=e.safeAddress,a=e.ethBalance,r=e.safeName,c=e.onUserConfirm,i=e.onClose,o=e.onTxReject,s=e.requestId,u=e.utf8Message,d=e.txData,l=e.txRecipient,j=Object(M.d)(),b=Object(U.i)(n),p=Object(U.n)(),f=Object(M.e)(Se.b),O=function(){o(s),i()},x=function(e){c(e,s),i()};return Object(H.jsxs)(ye.a,{txData:d,txTo:l,onSubmit:function(e,a){j(Object(Z.c)({safeAddress:n,to:l,valueInWei:"0",txData:d,operation:Y.Operation.DELEGATE,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:Q.a.STANDARD_TX,delayExecution:a},x,O))},onBack:O,operation:Y.Operation.DELEGATE,isConfirmDisabled:!f,children:[Object(H.jsx)(Fe,{title:t.name,iconUrl:t.iconUrl,onClose:O}),Object(H.jsx)(ve.a,{}),Object(H.jsxs)(_t,{children:[Object(H.jsx)(ce.a,{name:r,hash:n,showAvatar:!0,showCopyBtn:!0,explorerUrl:b}),Object(H.jsxs)(Gt,{children:[Object(H.jsx)(I.Text,{size:"md",children:"Balance:"}),Object(H.jsx)(I.Text,{size:"md",strong:!0,children:"".concat(a," ").concat(p.symbol)})]}),Object(H.jsx)(we.a,{withArrow:!0}),Object(H.jsx)(be,{txRecipient:l,txData:d,txValue:"0",recipientName:"SignMessageLib"}),Object(H.jsx)(I.Text,{size:"lg",strong:!0,children:"Signing message:"}),Object(H.jsx)(qt,{rows:"2",multiline:!0,disabled:!0,fullWidth:!0,label:"Message to sign",inputProps:{type:"text",value:u,name:"Message to sign",onChange:function(){},placeholder:""},InputProps:{disableUnderline:!0}}),Object(H.jsxs)(Ht,{children:[Object(H.jsx)(I.Icon,{size:"md",type:"info",color:"warning"}),"Signing a message with the Gnosis Safe requires a transaction on the blockchain"]})]})]})},Wt=n(59),Kt=["message","isOpen"],Jt=function(e){var t=e.message,n=e.isOpen,a=Object(Ut.a)(e,Kt),r=Object(Pt.j)(),c=Object(M.e)(Wt.a),i=Object($.k)(c)||Bt.a,o=Object($.l)(r,c).methods.signMessage(r.eth.accounts.hashMessage(t)).encodeABI(),s=function(e){var t=Object(X.isHexStrict)(e.toString()),n=e;if(t)try{n=Object(X.hexToUtf8)(e)}catch(a){}return n}(t);return Object(H.jsx)(G.c,{description:"Safe App transaction",title:"Safe App transaction",open:n,children:Object(H.jsx)(Vt,Object(S.a)(Object(S.a)({},a),{},{txRecipient:i,txData:o,utf8Message:s}))})},Yt=E.default.div(We||(We=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin: 0 -16px;\n"]))),Xt=Object(E.default)(I.Card)(Ke||(Ke=Object(k.a)(["\n  flex-grow: 1;\n  padding: 0;\n  border-radius: 0;\n"]))),Zt=E.default.iframe(Je||(Je=Object(k.a)(["\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n  display: ",";\n"])),(function(e){return e.isLoading?"none":"block"})),$t={isOpen:!1,txs:[],requestId:"",params:void 0},Qt=new L.a.providers.HttpProvider(Object(U.q)(),{timeout:1e4}),en=function(e){var t=e.appUrl,n=Object(M.e)(N.a),a=n.address,r=n.ethBalance,c=n.owners,i=n.threshold,o=Object(U.e)(),s=o.nativeCurrency,u=o.chainId,d=o.chainName,l=o.shortName,j=Object(M.e)((function(e){return Object(Lt.a)(e,{address:a})})),b=Object(B.g)().trackEvent,p=Object(w.useRef)(null),f=Object(w.useState)($t),O=Object(T.a)(f,2),x=O[0],h=O[1],m=Object(w.useState)(!0),g=Object(T.a)(m,2),v=g[0],y=g[1],k=Object(w.useState)((function(){return Object(Et.e)(t)})),E=Object(T.a)(k,2),z=E[0],L=E[1],P=function(){var e=Object(w.useState)(Nt),t=Object(T.a)(e,2),n=t[0],a=t[1];return[n,Object(w.useCallback)((function(e,t){a(Object(S.a)(Object(S.a)({},Nt),{},{isOpen:!0,message:e,requestId:t}))}),[]),Object(w.useCallback)((function(){a(Nt)}),[])]}(),G=Object(T.a)(P,3),q=G[0],V=G[1],W=G[2],K=Object(w.useRef)(),J=Object(w.useState)(!1),Y=Object(T.a)(J,2),X=Y[0],Z=Y[1],$=Object(w.useRef)(),Q=Object(w.useState)(!1),ee=Object(T.a)(Q,2)[1];Object(w.useEffect)((function(){var e=function(){clearTimeout(K.current),clearTimeout($.current)};return v?(K.current=window.setTimeout((function(){Z(!0)}),_.p),$.current=window.setTimeout((function(){ee((function(){throw Error("There was an error loading the Safe App. There might be a problem with the App provider.")}))}),3e4)):(e(),Z(!1)),function(){e()}}),[v]);var te=Object(w.useCallback)((function(e,t,n){return h({isOpen:!0,txs:e,requestId:n,params:t})}),[h]),ne=Object(w.useCallback)((function(){return h($t)}),[h]),ae=function(e,t,n,a){var r=Object(kt.useSnackbar)(),c=r.enqueueSnackbar,i=r.closeSnackbar,o=Object(M.e)(N.j),s=o.address,u=o.ethBalance,d=o.name,l=Object(M.d)(),j=Object(U.e)(),b=j.chainId,p=j.chainName,f=Object(w.useCallback)((function(t,n){var r,c,i=Object(S.a)(Object(S.a)({},t),{},{requestId:n||Math.trunc(window.performance.now()),version:"0.4.2"});a&&e&&(null===(r=a.current)||void 0===r||null===(c=r.contentWindow)||void 0===c||c.postMessage(i,e.url))}),[a,e]);return Object(w.useEffect)((function(){var n=function(e,n,a){if(e)switch(e){case R.SDK_MESSAGES.SEND_TRANSACTIONS:n&&t(n,void 0,a);break;case R.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var r={messageId:R.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:s,network:Object(Et.g)(p,b).toLowerCase(),ethBalance:u}},c={messageId:R.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(U.s)()}};f(r),f(c);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(e,"."))}},a=function(){var t=Object(A.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.origin!==window.origin){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(a.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(a.origin)),t.abrupt("return");case 5:n(a.data.messageId,a.data.data,a.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[p,b,n,i,l,c,u,t,s,d,e,f]),{sendMessageToIframe:f}}(z,te,ne,p),re=ae.sendMessageToIframe,ce=Object(w.useCallback)((function(){var e=p.current;e&&function(e,t){try{var n=new URL(e),a=new URL(t);return n.href===a.href}catch(r){return!1}}(e.src,t)&&(y(!1),re({messageId:R.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:a,network:Object(Et.g)(d,u).toLowerCase(),ethBalance:r}}))}),[d,u,r,a,t,re]),ie=function(e,t){var n=Object(w.useState)(void 0),a=Object(T.a)(n,2),r=a[0],c=a[1];return Object(w.useEffect)((function(){var n;return t&&function(e,t){n=new Mt(e,t),c(n)}(e,t),function(){var e;null===(e=n)||void 0===e||e.clear()}}),[t,e]),r}(p,z);Object(w.useEffect)((function(){null===ie||void 0===ie||ie.on("getEnvInfo",(function(){return{txServiceUrl:Object(U.s)()}})),null===ie||void 0===ie||ie.on(D.Methods.getTxBySafeTxHash,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,a=n.safeTxHash,e.next=3,Object(zt.a)(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.getSafeInfo,(function(){return{safeAddress:a,network:Object(Et.g)(d,u).toUpperCase(),chainId:parseInt(u,10),owners:c,threshold:i}})),null===ie||void 0===ie||ie.on(D.Methods.getSafeBalances,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,r,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.currency,c=void 0===r?"usd":r,e.next=3,Object(Rt.a)({safeAddress:a,selectedCurrency:c});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.rpcCall,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,e.prev=1,a=new Promise((function(e,t){Qt.send({jsonrpc:"2.0",method:n.call,params:n.params,id:"1"},(function(n,a){(n||(null===a||void 0===a?void 0:a.error))&&t(n||(null===a||void 0===a?void 0:a.error)),e(null===a||void 0===a?void 0:a.result)}))})),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.sendTransactions,(function(e){te(e.data.params.txs,e.data.params.params,e.data.id)})),null===ie||void 0===ie||ie.on(D.Methods.signMessage,function(){var e=Object(A.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data.params,a=n.message,V(a,t.data.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ie||void 0===ie||ie.on(D.Methods.getChainInfo,Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{chainName:d,chainId:u,shortName:l,nativeCurrency:s});case 1:case"end":return e.stop()}}),e)}))))}),[ie,te,a,c,i,V,s,u,d,l]);var oe=function(e,t){re({messageId:R.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},x.requestId),null===ie||void 0===ie||ie.send({safeTxHash:e},t)},se=function(e){re({messageId:R.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},x.requestId),null===ie||void 0===ie||ie.send("Transaction was rejected",e,!0)};return Object(w.useEffect)((function(){if(!t)throw Error("App url No provided or it is invalid.");var e=function(){var e=Object(A.a)(C.a.mark((function e(){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Et.d)(t);case 3:n=e.sent,L(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(Dt.c)(Dt.b._900,"".concat(t,", ").concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(w.useEffect)((function(){z&&b(Object(S.a)(Object(S.a)({},B.b.SAFE_APP),{},{label:z.name}))}),[z,b]),Object(H.jsxs)(Yt,{children:[Object(H.jsxs)(Xt,{children:[v&&Object(H.jsxs)(F.a,{style:{flexDirection:"column"},children:[X&&Object(H.jsx)(I.Title,{size:"xs",children:"The Safe App is taking too long to load, consider refreshing."}),Object(H.jsx)(I.Loader,{size:"md"})]}),Object(H.jsx)(Zt,{isLoading:v,frameBorder:"0",id:"iframe-".concat(t),ref:p,src:t,title:z.name,onLoad:ce,allow:"camera"})]}),Object(H.jsx)(Tt,{isOpen:x.isOpen,app:z,safeAddress:a,ethBalance:r,safeName:j,txs:x.txs,onClose:ne,requestId:x.requestId,onUserConfirm:oe,params:x.params,onTxReject:se}),Object(H.jsx)(Jt,{isOpen:q.isOpen,app:z,safeAddress:a,ethBalance:r,safeName:j,onClose:W,requestId:q.requestId,message:q.message,onUserConfirm:oe,onTxReject:se})]})},tn=n(2969),nn=n(2982),an=n(771),rn=n(127),cn=n(114),on=n(2928),sn=n.n(on),un=n(2098),dn=n.n(un),ln=n(314),jn=n.p+"static/media/addApp.8e52bdd5.svg",bn=n(354),pn=n(763),fn=Object(E.keyframes)(Ye||(Ye=Object(k.a)(["\n  0% {\n    background-position: 0% 54%;\n  }\n  50% {\n    background-position: 100% 47%;\n  }\n  100% {\n    background-position: 0% 54%;\n  }\n"]))),On=E.default.div(Xe||(Xe=Object(k.a)(["\n  height: 60px;\n  width: 60px;\n  border-radius: 30px;\n  margin: 0 auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),fn),xn=E.default.div(Ze||(Ze=Object(k.a)(["\n  height: 24px;\n  width: 160px;\n  margin: 24px auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),fn),hn=E.default.div($e||($e=Object(k.a)(["\n  height: 16px;\n  width: 200px;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),fn),mn=Object(E.default)(I.Card)(Qe||(Qe=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  box-shadow: 1px 2px 10px 0 ",";\n  height: 232px !important;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: ",";\n\n  :hover {\n    box-shadow: 1px 2px 16px 0 ",";\n    transition: box-shadow 0.3s ease-in-out;\n    background-color: ",";\n    cursor: pointer;\n\n    h5 {\n      color: ",";\n    }\n  }\n"])),(function(e){var t=e.theme;return Object(ln.alpha)(t.colors.shadow.color,.18)}),(function(e){return e.theme.colors.secondary}),(function(e){var t=e.theme;return Object(ln.alpha)(t.colors.shadow.color,.35)}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary})),gn=Object(E.default)(Ee.a)(et||(et=Object(k.a)(["\n  &.MuiButtonBase-root {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 10;\n    padding: 5px;\n    opacity: 0;\n\n    transition: opacity 0.2s ease-in-out;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),vn=Object(E.default)(tn.a.div)(tt||(tt=Object(k.a)(["\n  position: relative;\n\n  &:hover {\n    "," {\n      opacity: 1;\n    }\n  }\n"])),gn),wn=E.default.img(nt||(nt=Object(k.a)(["\n  width: ",";\n  height: ",";\n  margin-top: ",";\n  object-fit: contain;\n"])),(function(e){return"md"===e.size?"60px":"102px"}),(function(e){return"md"===e.size?"60px":"92px"}),(function(e){return"md"===e.size?"0":"-16px"})),Sn=Object(E.default)(I.Title)(at||(at=Object(k.a)(["\n  text-align: center;\n  margin: 16px 0 9px 0;\n"]))),yn=Object(E.default)(I.Text)(rt||(rt=Object(k.a)(["\n  text-align: center;\n  height: 72px;\n  line-height: 24px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),Cn=Object(E.default)(cn.a)(ct||(ct=Object(k.a)(["\n  text-decoration: none;\n"]))),An=function(e){e.currentTarget.onerror=null,e.currentTarget.src=pn.a},Tn=function(e,t){return t?"Unpin ".concat(e):"Pin ".concat(e)},kn=function(e){var t=e.app,n=e.iconSize,a=void 0===n?"md":n,r=e.to,c=e.onPin,i=e.onRemove,o=e.pinned,s=void 0!==o&&o;if(function(e){return bn.a.LOADING===e.fetchStatus}(t))return Object(H.jsx)(vn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(H.jsxs)(mn,{children:[Object(H.jsx)(On,{}),Object(H.jsx)(xn,{}),Object(H.jsx)(hn,{}),Object(H.jsx)(hn,{})]})});var u=Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(mn,{children:[Object(H.jsx)(wn,{alt:"".concat(t.name||"App"," Logo"),src:t.iconUrl,onError:An,size:a}),Object(H.jsx)(Sn,{size:"xs",children:t.name}),Object(H.jsxs)(yn,{size:"lg",children:[t.description," "]})]}),c&&Object(H.jsx)(gn,{"aria-label":Tn(t.name,s),title:Tn(t.name,s),onClick:function(e){e.preventDefault(),c(t)},children:s?Object(H.jsx)(sn.a,{}):Object(H.jsx)(dn.a,{})}),i&&Object(H.jsx)(gn,{"aria-label":"Remove an app",title:"Remove app",onClick:function(e){e.preventDefault(),i(t)},children:Object(H.jsx)(I.Icon,{size:"sm",type:"delete",color:"error"})})]});return Object(H.jsx)(vn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(H.jsx)(Cn,{to:r,children:u})})},En=function(e){var t=e.onClick;return Object(H.jsx)(vn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:Object(H.jsxs)(mn,{children:[Object(H.jsx)(wn,{alt:"PlayStation gamepad symbols",src:jn,onError:An,size:"lg"}),Object(H.jsx)(I.Button,{size:"md",color:"primary",variant:"contained",onClick:t,children:"Add custom app"})]})})},In=n(549),Dn=n(1461),Mn=n(1793),Rn=n.n(Mn),zn=n(2929),Ln=n.n(zn),Nn=Object(E.default)(I.Card)(it||(it=Object(k.a)(["\n  width: 100%;\n  box-sizing: border-box;\n"]))),Un=function(e){var t=e.value,n=e.onValueChange;return Object(H.jsx)(Nn,{children:Object(H.jsx)(Dn.a,{inputProps:{"aria-label":"search"},startAdornment:Object(H.jsx)(Rn.a,{}),endAdornment:t&&Object(H.jsx)(Ee.a,{"aria-label":"Clear the search",onClick:function(){return n("")},children:Object(H.jsx)(Ln.a,{})}),onChange:function(e){return n(e.target.value)},placeholder:"e.g Compound",value:t,style:{width:"100%"}})})},Pn=E.default.div(ot||(ot=Object(k.a)(["\n  max-width: 650px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: ",";\n  margin-bottom: ",";\n\n  & > p {\n    text-align: center;\n  }\n"])),(function(e){return e.theme.margin.xxl}),(function(e){return e.theme.margin.xxl})),Bn=Object(E.default)(I.Button)(st||(st=Object(k.a)(["\n  margin-top: ",";\n  max-width: 300px;\n"])),(function(e){return e.theme.margin.md})),Fn=function(e){var t=e.query,n=e.onWalletConnectSearch;return Object(H.jsxs)(Pn,{children:[Object(H.jsxs)(I.Text,{size:"xl",children:["No apps found matching ",Object(H.jsx)("b",{children:t}),". Connect to dApps that haven't yet been integrated with the Safe using the WalletConnect App."]}),Object(H.jsx)(Bn,{onClick:n,size:"md",children:"Search WalletConnect"})]})},_n=n(1576),Gn=n(128),qn=n(1558),Hn=n(1561),Vn=Object(E.default)(I.Checkbox)(ut||(ut=Object(k.a)(["\n  margin: 0;\n"]))),Wn=function(){var e=Object(qn.e)({subscription:{visited:!0}}).visited,t=(null===e||void 0===e?void 0:e.agreementAccepted)?q.p:void 0;return Object(H.jsx)(Hn.a,{component:Vn,label:Object(H.jsx)(I.Text,{size:"xl",children:"This app is not a Gnosis product and I agree to use this app at my own risk."}),name:"agreementAccepted",type:"checkbox",validate:t})},Kn=n(1643),Jn=n(1866),Yn=function(e){return P(e)?void 0:"Invalid URL"},Xn=Object(Kn.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(A.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!P(t)&&Object(Bt.e)(t),!e.t0){e.next=5;break}return e.next=4,Object(Et.f)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Zn=function(e){var t=e.onAppInfo,n=e.onLoading,a=e.onError,r=Object(qn.c)("appUrl",{subscription:{value:!0}}).input.value,c=Object(Jn.a)(r,500);return Object(w.useEffect)((function(){var e=function(){var e=Object(A.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,Object(Et.d)(c);case 4:r=e.sent,t(Object(S.a)({},r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),null===a||void 0===a||a(e.t0);case 11:n(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();P(c)&&e()}),[c,t,a,n]),null},$n=Object(E.default)(Hn.a)(dt||(dt=Object(k.a)(["\n  && {\n    width: 100%;\n  }\n"]))),Qn=function(e){var t=e.appList,n=Object(qn.e)({subscription:{visited:!0}}).visited,a=(null===n||void 0===n?void 0:n.appUrl)?Object(q.d)(q.p,Yn,Object(Et.i)(t)):void 0;return Object(H.jsx)($n,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:I.TextField,validate:a,autoComplete:"off"})},ea=function(e){var t=e.appInfo,n=e.onCancel,a=Object(qn.e)({subscription:{valid:!0,validating:!0,visited:!0}}),r=a.valid,c=a.validating,i=a.visited,o=Object(w.useMemo)((function(){var e=(null===i||void 0===i?void 0:i.agreementAccepted)&&(null===i||void 0===i?void 0:i.appUrl);return c||!r||!e||!Object(Et.h)(t)}),[c,r,i,t]);return Object(H.jsx)(G.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:o,text:"Add"}})},ta=n(21),na=Object(E.default)(I.TextField)(lt||(lt=Object(k.a)(["\n  && {\n    width: 385px;\n    .MuiFormLabel-root {\n      &.Mui-disabled {\n        color: rgba(0, 0, 0, 0.54);\n        &.Mui-error {\n          color: ",";\n        }\n      }\n    }\n    .MuiInputBase-root {\n      .MuiFilledInput-input {\n        color: rgba(0, 0, 0, 0.54);\n      }\n      &:before {\n        border-bottom-style: inset;\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.error})),aa=E.default.div(jt||(jt=Object(k.a)(["\n  display: flex;\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]))),ra=Object(E.default)(I.Link)(bt||(bt=Object(k.a)(["\n  inline-size: fit-content;\n"]))),ca=E.default.div(pt||(pt=Object(k.a)(["\n  display: flex;\n  margin-bottom: 24px;\n  flex-direction: column;\n  svg {\n    position: relative;\n    top: 4px;\n    left: 4px;\n  }\n"]))),ia=E.default.div(ft||(ft=Object(k.a)(["\n  height: 55px;\n  width: 65px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),oa=Object(E.default)(I.Loader)(Ot||(Ot=Object(k.a)(["\n  margin-right: 15px;\n"]))),sa={appUrl:"",agreementAccepted:!1},ua=Object(Et.e)(),da=function(e){var t=e.appList,n=e.closeModal,a=e.onAddApp,r=Object(w.useState)(ua),c=Object(T.a)(r,2),i=c[0],o=c[1],s=Object(w.useState)(),u=Object(T.a)(s,2),d=u[0],l=u[1],j=Object(v.h)(),b=Object(w.useState)(!1),p=Object(T.a)(b,2),f=p[0],O=p[1],x=Object(w.useCallback)(Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(i),j.push({pathname:Object(ta.o)(ta.g.APPS,Object(ta.k)()),search:"?appUrl=".concat(encodeURIComponent(i.url))});case 2:case"end":return e.stop()}}),e)}))),[j,i,a]);Object(w.useEffect)((function(){f&&l(void 0)}),[f]);var h=Object(w.useCallback)((function(e){l(e.message),Object(Dt.c)(Dt.b._903,e.message),o(ua)}),[o]);return Object(H.jsx)(_n.a,{decorators:[Xn],initialValues:sa,onSubmit:x,testId:"add-apps-form",children:function(){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(G.b.Body,{children:[Object(H.jsxs)(ca,{children:[Object(H.jsx)(I.Text,{size:"xl",as:"span",color:"secondary",children:"Safe Apps are third-party extensions."}),Object(H.jsxs)(ra,{href:"https://docs.gnosis-safe.io/build/sdks/safe-apps",target:"_blank",rel:"noreferrer",title:"Learn more about building Safe Apps",children:[Object(H.jsx)(I.Text,{size:"xl",as:"span",color:"primary",children:"Learn more about building Safe Apps."}),Object(H.jsx)(I.Icon,{size:"sm",type:"externalLink",color:"primary"})]})]}),Object(H.jsx)(Qn,{appList:t}),Object(H.jsx)(Zn,{onAppInfo:o,onLoading:O,onError:h}),Object(H.jsxs)(aa,{children:[f?Object(H.jsx)(ia,{children:Object(H.jsx)(oa,{size:"sm"})}):Object(H.jsx)(Gn.a,{alt:"Token image",width:55,src:i.iconUrl}),Object(H.jsx)(na,{label:"App name",disabled:!0,meta:{error:d},value:f?"Loading...":i.name===ua.name?"":i.name,onChange:function(){}})]}),Object(H.jsx)(Wn,{})]}),Object(H.jsx)(G.b.Footer,{children:Object(H.jsx)(ea,{appInfo:i,onCancel:n})})]})}})},la=n(90),ja=n(105),ba=n(112),pa=n(87),fa=function(){var e=Object(A.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Y.getSafeApps)(_.e,Object(U.b)(),{client_url:window.location.origin}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oa=function(){var e=function(){var e=Object(w.useState)([]),t=Object(T.a)(e,2),n=t[0],a=t[1],r=Object(w.useState)(bn.a.NOT_ASKED),c=Object(T.a)(r,2),i=c[0],o=c[1],s=Object(M.d)();return Object(w.useEffect)((function(){var e=function(){var e=Object(A.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(bn.a.LOADING),e.prev=1,e.next=4,fa();case 4:if(!(null===(t=e.sent)||void 0===t?void 0:t.length)){e.next=10;break}a(t.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{fetchStatus:bn.a.SUCCESS,id:String(e.id)})}))),o(bn.a.SUCCESS),e.next=11;break;case 10:throw new Error("Empty apps array \ud83e\udd2c");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),o(bn.a.ERROR),Object(Dt.c)(Dt.b._902,e.t0.message),s(Object(ba.b)(pa.a.SAFE_APPS_FETCH_ERROR_MSG));case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[s]),{remoteSafeApps:n,status:i}}(),t=e.remoteSafeApps,n=e.status,a=function(){var e=Object(w.useState)([]),t=Object(T.a)(e,2),n=t[0],a=t[1],r=Object(w.useState)(!1),c=Object(T.a)(r,2),i=c[0],o=c[1],s=Object(w.useCallback)((function(e){a(e),Object(ja.d)(Et.a,e.map((function(e){return{url:e.url}})))}),[]);return Object(w.useEffect)((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a((function(n){var a=Object(la.a)(n),r=a.findIndex((function(t){return t.url===e.url}));return t?a.splice(r,1):a[r]=Object(S.a)(Object(S.a)({},e),{},{fetchStatus:bn.a.SUCCESS}),a}))},t=function(){var t=Object(A.a)(C.a.mark((function t(){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ja.b)(Et.a);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,r=n.map((function(e){return Object(S.a)(Object(S.a)(Object(S.a)({},Object(Et.e)()),e),{},{url:e.url.trim(),id:e.url.trim(),custom:!0})})),a(r),o(!0),r.forEach((function(t){Object(Et.d)(t.url).then((function(t){e(Object(S.a)(Object(S.a)({},t),{},{custom:!0}))})).catch((function(n){e(t,!0),Object(Dt.c)(Dt.b._900,"".concat(t.url,", ").concat(n.message))}))}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),{customSafeApps:n,loaded:i,updateCustomSafeApps:s}}(),r=a.customSafeApps,c=a.updateCustomSafeApps,i=function(e,t){var n=Object(w.useState)([]),a=Object(T.a)(n,2),r=a[0],c=a[1],i=Object(w.useState)(!1),o=Object(T.a)(i,2),s=o[0],u=o[1];return Object(w.useEffect)((function(){var n=function(){var n=Object(A.a)(C.a.mark((function n(){var a,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ja.b)(Et.b);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0=[];case 5:a=n.t0,t===bn.a.SUCCESS&&(r=a.filter((function(t){return e.some((function(e){return e.id===t}))})),c(r),u(!0));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[t,e]),Object(w.useEffect)((function(){t===bn.a.SUCCESS&&Object(ja.d)(Et.b,r)}),[r,t]),{pinnedSafeAppIds:r,loaded:s,updatePinnedSafeApps:c}}(t,n),o=i.pinnedSafeAppIds,s=i.updatePinnedSafeApps,u=n===bn.a.LOADING,d=Object(B.g)().trackEvent,l=Object(w.useMemo)((function(){return[].concat(Object(la.a)(t),Object(la.a)(r)).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t,r]),j=Object(w.useMemo)((function(){return t.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t]),b=Object(w.useMemo)((function(){return r.filter((function(e){return!t.some((function(t){return t.url===e.url}))})).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[r,t]),p=Object(w.useMemo)((function(){return j.filter((function(e){return o.includes(e.id)}))}),[o,j]),f=Object(w.useCallback)((function(e){var t=[].concat(Object(la.a)(r),[e]);c(t)}),[c,r]),O=Object(w.useCallback)((function(e){var t=r.filter((function(t){return t.id!==e}));c(t)}),[c,r]),x=Object(w.useCallback)((function(e){var t=e.id,n=e.name,a=Object(la.a)(o);o.includes(t)?(d(Object(S.a)(Object(S.a)({},B.a.PIN),{},{label:n})),a.splice(a.indexOf(t),1)):(d(Object(S.a)(Object(S.a)({},B.a.UNPIN),{},{label:n})),a.push(t)),s(a)}),[d,s,o]);return{allApps:l,appList:j,customApps:b,pinnedSafeApps:p,removeApp:O,togglePin:x,addCustomApp:f,isLoading:u}},xa=n(2930),ha=n(2931),ma=n(630),ga=Object(E.default)(ha.a)(xt||(xt=Object(k.a)(["\n  display: flex;\n  margin-top: ",";\n  margin-bottom: ",";\n  box-shadow: 1px 2px 10px 0 rgba(212, 212, 211, 0.59);\n  box-sizing: border-box;\n  max-width: 100%;\n  padding: 52px 54px;\n  justify-content: center;\n  gap: ",";\n"])),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.sm})),va=Object(E.default)(dn.a)(ht||(ht=Object(k.a)(["\n  height: 16px;\n  vertical-align: middle;\n"]))),wa=function(){return Object(H.jsxs)(ga,{children:[Object(H.jsx)(Gn.a,{alt:"Info",src:ma.a}),Object(H.jsxs)(I.Text,{size:"xl",children:["Simply hover over an app and click on the",Object(H.jsx)(va,{}),"to bookmark the app here for convenient access"]})]})},Sa=E.default.div(mt||(mt=Object(k.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),ya=Object(E.css)(gt||(gt=Object(k.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Ca=E.default.div(vt||(vt=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"])),ya),Aa=Object(E.default)(tn.a.div)(wt||(wt=Object(k.a)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(243px, 1fr));\n  column-gap: 20px;\n  row-gap: 20px;\n  justify-content: space-evenly;\n"]))),Ta=E.default.div(St||(St=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n"]))),ka=Object(E.default)(I.Text)(yt||(yt=Object(k.a)(["\n  width: 100%;\n  margin: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.xl," 0 ").concat(t.margin.md," 0")})),Ea=Object(E.default)(I.IconText)(Ct||(Ct=Object(k.a)(["\n  justify-content: center;\n  margin: 16px 55px 20px 0;\n"]))),Ia=function(){var e=Object(ta.l)(),t=Object(ta.o)(ta.g.APPS,{shortName:Object(U.r)(),safeAddress:e}),n=Object(w.useState)(""),a=Object(T.a)(n,2),r=a[0],c=a[1],i=Oa(),o=i.allApps,s=i.appList,u=i.removeApp,d=i.isLoading,l=i.pinnedSafeApps,j=i.togglePin,b=i.customApps,p=i.addCustomApp,f=function(e,t){var n=Object(w.useMemo)((function(){return new xa.a(e,{keys:["name","description"],threshold:.2,findAllMatches:!0})}),[e]);return Object(w.useMemo)((function(){return t?n.search(t).map((function(e){return e.item})):e}),[n,e,t])}(s,r),O=Object(w.useState)(null),x=Object(T.a)(O,2),h=x[0],m=x[1],g=Object(In.a)(),v=g.open,S=g.toggle,y=g.clickAway,C=0===f.length&&r,A=!!b.length&&!r,k=!r,E=function(e){j(e)};return d||!e?Object(H.jsx)(Ca,{children:Object(H.jsx)(I.Loader,{size:"md"})}):Object(H.jsxs)(Sa,{children:[Object(H.jsx)(I.Menu,{children:Object(H.jsx)(rn.a,{start:"sm",xs:12,children:Object(H.jsx)(I.Breadcrumb,{children:Object(H.jsx)(I.BreadcrumbElement,{iconType:"apps",text:"Apps"})})})}),Object(H.jsxs)(Ta,{children:[Object(H.jsx)(Un,{value:r,onValueChange:function(e){return c(e.replace(/\s{2,}/g," "))}}),k&&Object(H.jsxs)(an.a,{title:Object(H.jsx)(I.Text,{color:"placeHolder",strong:!0,size:"md",children:"BOOKMARKED APPS"}),defaultExpanded:!0,children:[0===l.length&&Object(H.jsx)(wa,{}),Object(H.jsx)(nn.a,{children:Object(H.jsx)(Aa,{"data-testid":"safe_apps__pinned-apps-container",children:l.map((function(e){return Object(H.jsx)(kn,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,pinned:!0,onPin:E},e.id)}))})})]}),A&&Object(H.jsx)(an.a,{title:Object(H.jsx)(I.Text,{color:"placeHolder",strong:!0,size:"md",children:"CUSTOM APPS"}),defaultExpanded:!0,children:Object(H.jsx)(nn.a,{children:Object(H.jsx)(Aa,{children:b.map((function(e){return Object(H.jsx)(kn,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,onRemove:m},e.id)}))})})}),Object(H.jsx)(ka,{color:"placeHolder",strong:!0,size:"md",children:r?"SEARCH RESULTS":"ALL APPS"}),C&&Object(H.jsx)(Fn,{query:r,onWalletConnectSearch:function(){return c("WalletConnect")}}),Object(H.jsx)(nn.a,{children:Object(H.jsxs)(Aa,{"data-testid":"safe_apps__all-apps-container",children:[!r&&Object(H.jsx)(En,{onClick:S}),f.map((function(e){return Object(H.jsx)(kn,{to:"".concat(t,"?appUrl=").concat(encodeURIComponent(e.url)),app:e,onPin:E,pinned:l.some((function(t){return t.id===e.id}))},e.id)}))]})})]}),Object(H.jsx)(Ea,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"}),v&&Object(H.jsxs)(G.b,{title:"Add app",description:"Add a custom app to the list of apps",handleClose:y,children:[Object(H.jsx)(G.b.Header,{onClose:y,children:Object(H.jsx)(G.b.Header.Title,{children:"Add custom app"})}),Object(H.jsx)(da,{closeModal:y,appList:o,onAddApp:p})]}),h&&Object(H.jsxs)(G.b,{title:"Remove app",description:"Confirm for the app removal",handleClose:function(){return m(null)},children:[Object(H.jsx)(G.b.Header,{onClose:function(){return m(null)},children:Object(H.jsx)(G.b.Header.Title,{children:"Remove app"})}),Object(H.jsx)(G.b.Body,{children:Object(H.jsxs)(I.Text,{size:"xl",children:["This action will remove"," ",Object(H.jsx)(I.Text,{size:"xl",strong:!0,as:"span",children:h.name})," ","from the interface"]})}),Object(H.jsx)(G.b.Footer,{children:Object(H.jsx)(G.b.Footer.Buttons,{cancelButtonProps:{onClick:function(){return m(null)}},confirmButtonProps:{color:"error",onClick:function(){u(h.id),m(null)},text:"Remove"}})})]})]})},Da=function(e){var t=e.onCancel,n=e.onConfirm;return Object(H.jsx)(I.FixedDialog,{body:Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(I.Text,{size:"md",children:"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."}),Object(H.jsx)("br",{}),Object(H.jsxs)(I.Text,{size:"md",children:["I have read and understood the"," ",Object(H.jsx)("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank",children:"Terms"})," ","and this Disclaimer, and agree to be bound by them."]})]}),onCancel:t,onConfirm:n,title:"Disclaimer"})},Ma="APPS_LEGAL_CONSENT_RECEIVED";t.default=function(){var e=Object(v.h)(),t=(0,function(){var e=Object(v.i)().search;return{getAppUrl:Object(w.useCallback)((function(){return new URLSearchParams(e).get("appUrl")}),[e])}}().getAppUrl)(),n=function(){var e=Object(w.useState)(),t=Object(T.a)(e,2),n=t[0],a=t[1];return Object(w.useEffect)((function(){a(Object(ja.b)(Ma)||!1)}),[]),{consentReceived:n,onConsentReceipt:Object(w.useCallback)((function(){a(!0),Object(ja.d)(Ma,!0)}),[])}}(),a=n.consentReceived,r=n.onConsentReceipt;return t?a?Object(H.jsx)(en,{appUrl:t}):Object(H.jsx)(Da,{onCancel:function(){return e.goBack()},onConfirm:r}):Object(H.jsx)(Ia,{})}}}]);
//# sourceMappingURL=67.5dd85b18.chunk.js.map